loadEnvironment() {
    const loader = new GLTFLoader();
    // Using a relative path is safer for GitHub Pages sub-directories
    const path = './public/city.glb'; 
    debug(`Requesting City GLB from: ${path}`);

    // Add a fallback ground so the screen isn't black if the model fails
    const floor = new THREE.Mesh(
        new THREE.PlaneGeometry(1000, 1000),
        new THREE.MeshStandardMaterial({ color: 0x333333 })
    );
    floor.rotation.x = -Math.PI / 2;
    this.scene.add(floor);

    loader.load(path, (gltf) => {
        this.scene.add(gltf.scene);
        const box = new THREE.Box3().setFromObject(gltf.scene);
        const center = box.getCenter(new THREE.Vector3());
        
        // Remove floor if city loads successfully
        this.scene.remove(floor);
        
        this.camera.position.set(center.x, center.y + 100, center.z + 300);
        this.camera.lookAt(center);
        
        document.getElementById('log').innerText = "READY";
        document.getElementById('sub-log').innerText = "City Rendered Successfully";
        debug("SUCCESS: City GLB Loaded.");
    }, 
    (xhr) => {
        const percent = Math.round((xhr.loaded / xhr.total) * 100);
        document.getElementById('sub-log').innerText = `Loading City: ${percent}%`;
    },
    (err) => {
        debug(`ERROR: GLB 404 at ${path}. Check if file is in /public/`);
        document.getElementById('log').innerText = "CITY LOAD ERROR";
        document.getElementById('sub-log').innerText = "Using Fallback Floor";
    });
}